# ============================================================================
# 1. DOMAIN AND SSL CONFIGURATION
# ============================================================================

# Use fully qualified domain names. Set to DOMAIN=central.local if SSL_TYPE=selfsign.
DOMAIN=your.domain.com

# Used for Let's Encrypt expiration emails and Enketo technical support emails
SYSADMIN_EMAIL=administrator@email.com

# Options: letsencrypt, customssl, upstream, selfsign
# - letsencrypt: Automated HTTPS with Let's Encrypt (requires public DNS)
# - customssl: Use your own certificates (files/local/customssl/)
# - upstream: Behind a reverse proxy (proxy handles SSL on ports 80/443, we use 8080/8443)
# - selfsign: Self-signed certificates (development only)
SSL_TYPE=letsencrypt

# Do not change if using SSL_TYPE=letsencrypt
# For upstream mode, must be 8080 (HTTP_PORT) and 8443 (HTTPS_PORT) to avoid conflicts
HTTP_PORT=80
HTTPS_PORT=443

# Optional: Additional domains for SSL certificate (comma-separated, no spaces)
# Use for: S3 subdomains (if using Garage), www.domain, etc.
# Example: EXTRA_SERVER_NAME=odk-central.s3.your.domain.com web.your.domain.com
# EXTRA_SERVER_NAME=

# Optional: configure Node
# SERVICE_NODE_OPTIONS=

# ============================================================================
# 2. DATABASE CONFIGURATION
# ============================================================================

# Choose one of three options:
# 1. Container (default): PostgreSQL runs in docker-compose (postgres14 service)
# 2. Local PostgreSQL: PostgreSQL on host machine
# 3. Hosted Service: AWS RDS, Google Cloud SQL, Azure Database, etc.

# For Container: Leave blank (uses default postgres14 service)
# For Local/Hosted: Uncomment and set these values
# DB_HOST=localhost       # or RDS endpoint, etc.
# DB_USER=odk
# DB_PASSWORD=odk
# DB_NAME=odk
# DB_SSL=null             # null for local, true for managed services (RDS, CloudSQL)

# Default: Uses postgres14 container with these values:
# DB_HOST=postgres14
# DB_USER=odk
# DB_PASSWORD=odk
# DB_NAME=odk
# DB_SSL=null

# Optional: Database connection pool size (default: 10)
# DB_POOL_SIZE=

# Optional: configure a custom mail server
# EMAIL_FROM=
# EMAIL_HOST=
# EMAIL_PORT=
# EMAIL_SECURE=
# EMAIL_IGNORE_TLS=
# EMAIL_USER=
# EMAIL_PASSWORD=

# Optional: configure Single Sign-on with OpenID Connect
# OIDC_ENABLED=
# OIDC_ISSUER_URL=
# OIDC_CLIENT_ID=
# OIDC_CLIENT_SECRET=

# Optional: configure error reporting
# SENTRY_ORG_SUBDOMAIN=
# SENTRY_KEY=
# SENTRY_PROJECT=
# SENTRY_TRACE_RATE=

# ============================================================================
# 3. S3 BLOB STORAGE CONFIGURATION (Optional)
# ============================================================================

# Choose one of three options:
# 1. None (default): Blobs stored in PostgreSQL (not recommended for production)
# 2. Garage (local S3): This repo includes Garage S3 container (dxflrs/garage:v2.1.0)
# 3. External S3: AWS S3, MinIO, or other S3-compatible service

# OPTION 1: No S3 configuration (PostgreSQL blobs)
# Leave all S3_* variables empty (default behavior)

# OPTION 2: Use local Garage S3
# Uncomment and configure:
# S3_SERVER=https://odk-central.s3.${DOMAIN}    # Virtual-hosted style (REQUIRED for Garage)
# S3_BUCKET_NAME=odk-central
# S3_ACCESS_KEY=<generated-by-setup-garage.py>
# S3_SECRET_KEY=<generated-by-setup-garage.py>

# Run setup script to auto-generate credentials:
# uv run --with pyyaml --with questionary python garage/setup-garage.py

# OPTION 3: Use external S3 (AWS, MinIO, etc.)
# Uncomment and configure:
# S3_SERVER=https://mybucket.s3.amazonaws.com    # or your MinIO URL
# S3_BUCKET_NAME=mybucket
# S3_ACCESS_KEY=your-access-key
# S3_SECRET_KEY=your-secret-key

# Optional: S3 request timeout in milliseconds (default: 60000)
# S3_REQUEST_TIMEOUT=

# ============================================================================
# 4. OTHER OPTIONAL SETTINGS
# ============================================================================

# Configure web user login session lifetime (in seconds, default: 86400 = 24 hours)
# SESSION_LIFETIME=

